/*
 * SimpleModal @VERSION - jQuery Plugin
 * http://simplemodal.com/
 * Copyright (c) 2013 Eric Martin
 * Licensed under MIT and GPL
 * Date:
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){var o=[],t=e(document),i=navigator.userAgent.toLowerCase(),n=e(window),s=[],a={ieQuirks:null,expression:!0,msie:/msie/.test(i)&&!/opera/.test(i),opera:/opera/.test(i)};a.ie6=a.msie&&/msie 6./.test(i)&&"object"!=typeof window.XMLHttpRequest,a.ie7=a.msie&&/msie 7.0/.test(i);try{document.createElement("div").style.setExpression("height"),document.createElement("div").style.removeExpression("height")}catch(d){a.expression=!1}e.modal=function(o,t){return e.modal.impl.init(o,t)},e.modal.close=function(){e.modal.impl.close()},e.modal.focus=function(o){e.modal.impl.focus(o)},e.modal.setContainerDimensions=function(){e.modal.impl.setContainerDimensions()},e.modal.setPosition=function(){e.modal.impl.setPosition()},e.modal.update=function(o,t){e.modal.impl.update(o,t)},e.fn.modal=function(o){return e.modal.impl.init(this,o)},e.modal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1e3,close:!0,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:"simplemodal-close",escClose:!0,overlayClose:!1,fixed:!0,position:null,persist:!1,modal:!0,onOpen:null,onShow:null,onClose:null},e.modal.impl={d:{},init:function(o,t){var i=this;if(i.d.data)return!1;if(a.ieQuirks=a.msie&&!e.support.boxModel,i.o=e.extend({},e.modal.defaults,t),i.zIndex=i.o.zIndex,i.occb=!1,"object"==typeof o)o=o instanceof e?o:e(o),i.d.placeholder=!1,o.parent().parent().size()>0&&(o.before(e("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"})),i.d.placeholder=!0,i.display=o.css("display"),i.o.persist||(i.d.orig=o.clone(!0)));else{if("string"!=typeof o&&"number"!=typeof o)return alert("SimpleModal Error: Unsupported data type: "+typeof o),i;o=e("<div></div>").html(o)}return i.create(o),o=null,i.open(),e.isFunction(i.o.onShow)&&i.o.onShow.apply(i,[i.d]),i},create:function(t){var i=this;i.getDimensions(),i.o.modal&&a.ie6&&(i.d.iframe=e('<iframe src="javascript:false;"></iframe>').css(e.extend(i.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:s[0],width:s[1],zIndex:i.o.zIndex,top:0,left:0})).appendTo(i.o.appendTo)),i.d.overlay=e("<div></div>").attr("id",i.o.overlayId).addClass("simplemodal-overlay").css(e.extend(i.o.overlayCss,{display:"none",opacity:i.o.opacity/100,height:i.o.modal?o[0]:0,width:i.o.modal?o[1]:0,position:"fixed",left:0,top:0,zIndex:i.o.zIndex+1})).appendTo(i.o.appendTo),i.d.container=e("<div></div>").attr("id",i.o.containerId).addClass("simplemodal-container").css(e.extend({position:i.o.fixed?"fixed":"absolute"},i.o.containerCss,{display:"none",zIndex:i.o.zIndex+2})).append(i.o.close&&i.o.closeHTML?e(i.o.closeHTML).addClass(i.o.closeClass):"").appendTo(i.o.appendTo),i.d.wrap=e("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(i.d.container),i.d.data=t.attr("id",t.attr("id")||i.o.dataId).addClass("simplemodal-data").css(e.extend(i.o.dataCss,{display:"none"})).appendTo("body"),t=null,i.setContainerDimensions(),i.d.data.appendTo(i.d.wrap),(a.ie6||a.ieQuirks&&a.expression===!0)&&i.fixIE()},bindEvents:function(){var i=this;e("."+i.o.closeClass).bind("click.simplemodal",function(e){e.preventDefault(),i.close()}),i.o.modal&&i.o.close&&i.o.overlayClose&&i.d.overlay.bind("click.simplemodal",function(e){e.preventDefault(),i.close()}),t.bind("keydown.simplemodal",function(e){i.o.modal&&9===e.keyCode?i.watchTab(e):i.o.close&&i.o.escClose&&27===e.keyCode&&(e.preventDefault(),i.close())}),n.bind("resize.simplemodal orientationchange.simplemodal",function(){i.getDimensions(),i.o.autoResize?i.setContainerDimensions():i.o.autoPosition&&i.setPosition(),a.ie6||a.ieQuirks&&a.expression===!0?i.fixIE():i.o.modal&&(i.d.iframe&&i.d.iframe.css({height:s[0],width:s[1]}),i.d.overlay.css({height:o[0],width:o[1]}))})},unbindEvents:function(){e("."+this.o.closeClass).unbind("click.simplemodal"),t.unbind("keydown.simplemodal"),n.unbind(".simplemodal"),this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var o=this,t=o.o.position;e.each([o.d.iframe||null,o.o.modal?o.d.overlay:null,"fixed"===o.d.container.css("position")?o.d.container:null],function(e,o){if(o){var i="document.body.clientHeight",n="document.body.clientWidth",s="document.body.scrollHeight",a="document.body.scrollLeft",d="document.body.scrollTop",l="document.body.scrollWidth",r="document.documentElement.clientHeight",c="document.documentElement.clientWidth",p="document.documentElement.scrollLeft",m="document.documentElement.scrollTop",u=o[0].style;if(u.position="absolute",2>e)try{u.removeExpression("height"),u.removeExpression("width"),u.setExpression("height",""+s+" > "+i+" ? "+s+" : "+i+' + "px"'),u.setExpression("width",""+l+" > "+n+" ? "+l+" : "+n+' + "px"')}catch(h){}else{var f,v;if(t&&t.constructor===Array){var g=t[0]?"number"==typeof t[0]?t[0].toString():t[0].replace(/px/,""):o.css("top").replace(/px/,"");if(f=-1===g.indexOf("%")?g+" + (t = "+m+" ? "+m+" : "+d+') + "px"':parseInt(g.replace(/%/,""))+" * (("+r+" || "+i+") / 100) + (t = "+m+" ? "+m+" : "+d+') + "px"',t[1]){var y="number"==typeof t[1]?t[1].toString():t[1].replace(/px/,"");v=-1===y.indexOf("%")?y+" + (t = "+p+" ? "+p+" : "+a+') + "px"':parseInt(y.replace(/%/,""))+" * (("+c+" || "+n+") / 100) + (t = "+p+" ? "+p+" : "+a+') + "px"'}}else f="("+r+" || "+i+") / 2 - (this.offsetHeight / 2) + (t = "+m+" ? "+m+" : "+d+') + "px"',v="("+c+" || "+n+") / 2 - (this.offsetWidth / 2) + (t = "+p+" ? "+p+" : "+a+') + "px"';try{u.removeExpression("top"),u.removeExpression("left"),u.setExpression("top",f),u.setExpression("left",v)}catch(h){}}}})},focus:function(o){var t=this,i=o&&-1!==e.inArray(o,["first","last"])?o:"first",n=e(":input:enabled:visible:"+i,t.d.wrap);setTimeout(function(){n.length>0?n.focus():t.d.wrap.focus()},10)},getDimensions:function(){var e="undefined"==typeof window.innerHeight?n.height():window.innerHeight;o=[t.height(),t.width()],s=[e,n.width()]},getVal:function(e,o){return e?"number"==typeof e?e:"auto"===e?0:e.indexOf("%")>0?parseInt(e.replace(/%/,""))/100*("h"===o?s[0]:s[1]):parseInt(e.replace(/px/,"")):null},update:function(e,o){var t=this;return t.d.data?(t.d.origHeight=t.getVal(e,"h"),t.d.origWidth=t.getVal(o,"w"),t.d.data.hide(),e&&t.d.container.css("height",e),o&&t.d.container.css("width",o),t.setContainerDimensions(),t.d.data.show(),t.o.focus&&t.focus(),t.unbindEvents(),t.bindEvents(),void 0):!1},setContainerDimensions:function(){var e=this,o=a.ie6||a.ie7,t=e.d.origHeight?e.d.origHeight:a.opera?e.d.container.height():e.getVal(o?e.d.container[0].currentStyle.height:e.d.container.css("height"),"h"),i=e.d.origWidth?e.d.origWidth:a.opera?e.d.container.width():e.getVal(o?e.d.container[0].currentStyle.width:e.d.container.css("width"),"w"),n=e.d.data.outerHeight(!0),d=e.d.data.outerWidth(!0);e.d.origHeight=e.d.origHeight||t,e.d.origWidth=e.d.origWidth||i;var l=e.o.maxHeight?e.getVal(e.o.maxHeight,"h"):null,r=e.o.maxWidth?e.getVal(e.o.maxWidth,"w"):null,c=l&&l<s[0]?l:s[0],p=r&&r<s[1]?r:s[1],m=e.o.minHeight?e.getVal(e.o.minHeight,"h"):"auto";t=t?e.o.autoResize&&t>c?c:m>t?m:t:n?n>c?c:e.o.minHeight&&"auto"!==m&&m>n?m:n:m;var u=e.o.minWidth?e.getVal(e.o.minWidth,"w"):"auto";i=i?e.o.autoResize&&i>p?p:u>i?u:i:d?d>p?p:e.o.minWidth&&"auto"!==u&&u>d?u:d:u,e.d.container.css({height:t,width:i}),e.d.wrap.css({overflow:n>t||d>i?"auto":"visible"}),e.o.autoPosition&&e.setPosition()},setPosition:function(){var e,o,t=this,i=s[0]/2-t.d.container.outerHeight(!0)/2,a=s[1]/2-t.d.container.outerWidth(!0)/2,d="fixed"!==t.d.container.css("position")?n.scrollTop():0;t.o.position&&"[object Array]"===Object.prototype.toString.call(t.o.position)?(e=d+(t.o.position[0]||i),o=t.o.position[1]||a):(e=d+i,o=a),t.d.container.css({left:o,top:e})},watchTab:function(o){var t=this;if(e(o.target).parents(".simplemodal-container").length>0){if(t.inputs=e(":input:enabled:visible:first, :input:enabled:visible:last",t.d.data[0]),!o.shiftKey&&o.target===t.inputs[t.inputs.length-1]||o.shiftKey&&o.target===t.inputs[0]||0===t.inputs.length){o.preventDefault();var i=o.shiftKey?"last":"first";t.focus(i)}}else o.preventDefault(),t.focus()},open:function(){var o=this;o.d.iframe&&o.d.iframe.show(),e.isFunction(o.o.onOpen)?o.o.onOpen.apply(o,[o.d]):(o.d.overlay.show(),o.d.container.show(),o.d.data.show()),o.o.focus&&o.focus(),o.bindEvents()},close:function(){var o=this;if(!o.d.data)return!1;if(o.unbindEvents(),e.isFunction(o.o.onClose)&&!o.occb)o.occb=!0,o.o.onClose.apply(o,[o.d]);else{if(o.d.placeholder){var t=e("#simplemodal-placeholder");o.o.persist?t.replaceWith(o.d.data.removeClass("simplemodal-data").css("display",o.display)):(o.d.data.hide().remove(),t.replaceWith(o.d.orig))}else o.d.data.hide().remove();o.d.container.hide().remove(),o.d.overlay.hide(),o.d.iframe&&o.d.iframe.hide().remove(),o.d.overlay.remove(),o.d={}}}}});